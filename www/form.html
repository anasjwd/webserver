<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="icon" href="data:;base64,=">
		<link rel="stylesheet" href="./assets/css/style.css">
		<title>Form Testing | 42 Webserv</title>
	</head>
	<body>
		<nav>
			<div class="nav-container">
				<a href="/index.html" class="logo">42 Webserv</a>
				<ul class="nav-links">
					<li><a href="/index.html">Home</a></li>
					<li><a href="/form.html">ReqTests</a></li>
					<li><a href="/cgi.html">The CGI</a></li>
					<li><a href="/about.html">About</a></li>
					<li><button class="theme-toggle" id="themeToggle">ðŸŒ™</button></li>
				</ul>
			</div>
		</nav>

		<div class="main-content">
			<div class="container">
				<header>
					<h1>Form Testing Page</h1>
					<p class="description">
						Test various HTTP POST requests and file uploads with our webserver implementation.
						This page includes different form types to verify your server's handling of form data,
						file uploads, and different content types.
					</p>
				</header>

				<div class="form-container">
					<h2>Standard Form Submission</h2>
					<form id="standardForm" action="./form.html" method="post">
						<div class="form-group">
							<label for="username">Username</label>
							<input type="text" id="username" name="username" required>
						</div>

						<div class="form-group">
							<label for="email">Email</label>
							<input type="email" id="email" name="email" required>
						</div>

						<div class="form-group">
							<label for="password">Password</label>
							<input type="password" id="password" name="password" required>
						</div>

						<div class="form-group">
							<label for="message">Message</label>
							<textarea id="message" name="message" required></textarea>
						</div>

						<button type="submit" class="submit-btn">Submit Form</button>
					</form>

					<div id="standardResponse" class="response-container"></div>
				</div>

				<div class="form-container">
					<h2>File Upload</h2>
					<form id="uploadForm"  method="post" enctype="multipart/form-data">
						<div class="form-group">
							<label for="fileDescription">File Description</label>
							<input type="text" id="fileDescription" name="description">
						</div>

						<div class="form-group file-upload">
							<label for="fileInput">Choose a file to upload</label>
							<input type="file" name="file" required>
							<!-- <input type="file" id="fileInput" name="file" required> -->
						</div>

						<button type="submit" class="submit-btn">Upload File</button>
					</form>

					<div id="uploadResponse" class="response-container"></div>
				</div>

			</div>
		</div>

		<footer>
			<p><b>Â© 2025 42 Webserv Project |</b> Created by 
			<b>GEET (Alassiqu, Ajawad, Ahanaf)</b></p>
		</footer>

		<script src="./assets/js/script.js"></script>
		<!-- <script>
			// File upload preview
			document.getElementById('fileInput').addEventListener('change', function(e) {
				const file = e.target.files[0];
				const preview = document.getElementById('filePreview');
				
				if (file) {
					if (file.type.startsWith('image/')) {
						const reader = new FileReader();
						reader.onload = function(e) {
							preview.src = e.target.result;
							preview.style.display = 'block';
						}
						reader.readAsDataURL(file);
					} else {
						preview.style.display = 'none';
					}
				}
			});

			document.getElementById('standardForm').addEventListener('submit', function(e) {
				e.preventDefault();
				const formData = new FormData(this);
				
				fetch(this.action, {
					method: 'POST',
					body: formData
				})
				.then(response => response.text())
				.then(data => {
					const responseDiv = document.getElementById('standardResponse');
					responseDiv.textContent = data;
					responseDiv.className = 'response-container success';
					responseDiv.style.display = 'block';
				})
				.catch(error => {
					const responseDiv = document.getElementById('standardResponse');
					responseDiv.textContent = 'Error: ' + error.message;
					responseDiv.className = 'response-container error';
					responseDiv.style.display = 'block';
				});
			});

			document.getElementById('uploadForm').addEventListener('submit', function(e) {
				e.preventDefault();
				const formData = new FormData(this);
				
				fetch(this.action, {
					method: 'POST',
					body: formData
				})
				.then(response => response.text())
				.then(data => {
					const responseDiv = document.getElementById('uploadResponse');
					responseDiv.textContent = data;
					responseDiv.className = 'response-container success';
					responseDiv.style.display = 'block';
				})
				.catch(error => {
					const responseDiv = document.getElementById('uploadResponse');
					responseDiv.textContent = 'Error: ' + error.message;
					responseDiv.className = 'response-container error';
					responseDiv.style.display = 'block';
				});
			});

			document.getElementById('sendJson').addEventListener('click', function() {
				const jsonData = document.getElementById('jsonData').value;
				const endpoint = document.getElementById('apiEndpoint').value;
				
				try {
					// Validate JSON
					JSON.parse(jsonData);
					
					fetch(endpoint, {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json'
						},
						body: jsonData
					})
					.then(response => response.text())
					.then(data => {
						const responseDiv = document.getElementById('jsonResponse');
						responseDiv.textContent = data;
						responseDiv.className = 'response-container success';
						responseDiv.style.display = 'block';
					})
					.catch(error => {
						const responseDiv = document.getElementById('jsonResponse');
						responseDiv.textContent = 'Error: ' + error.message;
						responseDiv.className = 'response-container error';
						responseDiv.style.display = 'block';
					});
				} catch (e) {
					const responseDiv = document.getElementById('jsonResponse');
					responseDiv.textContent = 'Invalid JSON: ' + e.message;
					responseDiv.className = 'response-container error';
					responseDiv.style.display = 'block';
				}
			});
		</script> -->
	</body>
</html>